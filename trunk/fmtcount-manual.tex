% !TEX encoding = UTF-8
\documentclass{nlctdoc}

\usepackage{color}
\usepackage{amsmath,amssymb}
\usepackage[colorlinks,
            bookmarks,
            bookmarksopen,
            pdfauthor={Nicola L.C. Talbot},
            pdftitle={fmtcount.sty: Displaying the Values of LaTeX Counters},
            pdfkeywords={LaTeX,counter}]{hyperref}
\usepackage{tabularx,supertabular,multirow}
\usepackage{ifxetex}
\ifxetex
\usepackage{fontspec}
\usepackage{polyglossia}
\setmainlanguage{english}
\setotherlanguage{french}
\setotherlanguage[numerals=maghrib]{arabic}
\setmainfont{Times New Roman}
\setmonofont{Courier New}
\let\arabicfonttt\ttfamily
\newcommand*\og{«\thinspace}
\newcommand*\fg{\thinspace»}
\else
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french,english]{babel}
\frenchsetup{og=«,fg=»}
\fi
\usepackage{cmap}
\usepackage{siunitx}
\usepackage{fmtcount}% needed for \fc@iterate@on@languages
\newcommand*\uref[1]{\href{#1}{#1}}
\DeclareMathOperator{\intv}{..}
\newcommand*\interface{}
\makeatletter
\newcommand*{\LanguagePackageOptionList}{{%
 \def\@tempf##1{\texttt{##1}}% how to format each option
 % we don't use \cs{newtoks} because anyway this is within a group
 \toks0{}% token in which we accumulate result
 %  \toks1 token in which we place next dialect
 \count0 0 % to distinguish first and second iteration, we need to do tricks because we want to insert `and'
           % before the last item in the list.
 \def\@tempb##1{%
   \ifnum\count0=0 %
   \else\ifnum\count0=1 %
     \toks0\toks1 %
   \else
     \edef\@tempa{\the\toks0, \the\toks1}%
     \toks0\expandafter{\@tempa}%
   \fi\fi
   \toks1\expandafter{\@tempf{##1}}%
   \advance\count0 by 1 %
 }%
 \fc@iterate@on@languages\@tempb
 \edef\@tempa{\the\toks0, and \the\toks1}%
 \expandafter
}\@tempa}
\makeatother


\ifxetex
\CheckSum{10718}
\else
\CheckSum{10311}
\newcommand*\XeReplacement[1][1]{\textcolor{red}{\textbf{\multido{\i=0+1}{#1}{?}}}}
\fi

\doxitem{Option}{option}{options}

\newlength{\tabcolwidth}
\newlength{\coliwidth}
\newcommand*\cnab{\centering\arraybackslash}
\newcommand*\ColIRI[1]{}
\csname @ifpackageloaded\endcsname{tex4ht}{%
\newcommand*\ColIRII[1]{\parbox{\coliwidth}{\cnab #1}}
}{%
\newcommand*\ColIRII[1]{\multirow{-2}{\coliwidth}{\cnab #1}}
}

\begin{document}
\RecordChanges

 \title{fmtcount.sty: Displaying the Values of 
\LaTeX\ Counters}
 \author{Nicola L.C. Talbot\\
 \url{www.dickimaw-books.com}
 \and
 Vincent Bela\"iche}
 \date{%%DATE%% (version %%VERSION%%)\relax
}
 \maketitle
 \tableofcontents
 \section{Introduction}

The \styfmt{fmtcount} package provides commands to display
the values of \LaTeX\ counters in a variety of formats. It also
provides equivalent commands for actual numbers rather than 
counter names. Limited multilingual support is available. 
Currently, there is only support for English, French (including
Belgian and Swiss variations), Spanish, Portuguese, German and 
Italian.

\section{Available Commands}

The commands can be divided into two categories: those that
take the name of a counter as the argument, and those
that take a number as the argument.

\begin{definition}[\DescribeMacro{\ordinal}]
\cs{ordinal}\marg{counter}\oarg{gender}
\end{definition}
This will print the value of a \LaTeX\ counter \meta{counter} as an 
ordinal, where the macro
\begin{definition}[\DescribeMacro{\fmtord}]
\cs{fmtord}\marg{text}
\end{definition}
is used to format the st, nd, rd, th bit.  By default the ordinal is
formatted as a superscript, if the package option \pkgopt{level} is
used, it is level with the text.  For example, if the current section
is \arabic{section}, then \verb"\ordinal{section}" will produce the output:
\ordinal{section}. Note that the optional argument \meta{gender} 
occurs \emph{at the end}. This argument may only take one of
the following values: \texttt{m} (masculine), \texttt{f}
(feminine) or \texttt{n} (neuter.) If \meta{gender} is omitted, 
or if the given gender has no meaning in the current language, 
\texttt{m} is assumed.

\textbf{Notes:} 
\begin{enumerate}
\item the \cls{memoir} class also defines a command called
\cs{ordinal} which takes a number as an argument instead of a
counter. In order to overcome this incompatiblity, if you want
to use the \styfmt{fmtcount} package with the \cls{memoir} class 
you should use
\begin{definition}[\DescribeMacro{\FCordinal}]
\cs{FCordinal}
\end{definition}
to access \styfmt{fmtcount}'s version of \cs{ordinal}, and use
\cs{ordinal} to use \cls{memoir}'s version of that command.
\item When the \oarg{gender} optional argument is omitted, no ignoring of spaces
  following the final argument occurs. So both
  \verb"\ordinal{section}"\textvisiblespace\verb"!"  and
  \verb"\ordinal{section}[m]"\textvisiblespace\verb"!" will produce:
  \ordinal{section}\textvisiblespace!, where \textvisiblespace\ denotes a space.  See
  \S~\ref{sec:tailing-oarg}.
\end{enumerate}

The commands below only work for numbers in the range 0~to~99999.
\begin{definition}[\DescribeMacro{\ordinalnum}]
\cs{ordinalnum}\marg{n}\oarg{gender}
\end{definition}
This is like \cs{ordinal} but takes an actual number rather than a counter as the argument. For example:
\verb"\ordinalnum{"\texttt{\arabic{section}}\verb"}" will produce: \ordinal{section}.

\begin{definition}[\DescribeMacro{\numberstring}]
\cs{numberstring}\marg{counter}\oarg{gender}
\end{definition}
This will print the value of \meta{counter} as text.  E.g.\
\verb"\numberstring{section}" will produce: three. The optional
argument is the same as that for \cs{ordinal}.

\begin{definition}[\DescribeMacro{\Numberstring}]
\cs{Numberstring}\marg{counter}\oarg{gender}
\end{definition}
This does the same as \cs{numberstring}, but with initial letters in
uppercase.  For example, \verb"\Numberstring{section}" will produce:
\Numberstring{section}.

\begin{definition}[\DescribeMacro{\NUMBERstring}]
\cs{NUMBERstring}\marg{counter}\oarg{gender}
\end{definition}
This does the same as \cs{numberstring}, but converts the string to
upper case. Note that
\verb"\MakeUppercase{\NUMBERstring{"\meta{counter}\verb'}}' doesn't
work, due to the way that \cs{MakeUppercase} expands its
argument\footnote{See all the various postings to
\texttt{comp.text.tex} about \cs{MakeUppercase}}.

\begin{definition}[\DescribeMacro{\numberstringnum}]
\cs{numberstringnum}\marg{n}\oarg{gender}
\end{definition}
\begin{definition}[\DescribeMacro{\Numberstringnum}]
\cs{Numberstringnum}\marg{n}\oarg{gender}
\end{definition}
\begin{definition}[\DescribeMacro{\NUMBERstringnum}]
\cs{NUMBERstringnum}\marg{n}\oarg{gender}
\end{definition}
Theses macros  work like 
\cs{numberstring}, \cs{Numberstring} and \cs{NUMBERstring}, 
respectively, but take an actual number
rather than a counter as the argument. For example:
\verb'\Numberstringnum{105}' will produce: One Hundred and Five.

\begin{definition}[\DescribeMacro{\ordinalstring}]
\cs{ordinalstring}\marg{counter}\oarg{gender}
\end{definition}
This will print the value of \meta{counter} as a textual ordinal.
E.g.\ \verb"\ordinalstring{section}" will produce: third. The
optional argument is the same as that for \cs{ordinal}.

\begin{definition}[\DescribeMacro{\Ordinalstring}]
\cs{Ordinalstring}\marg{counter}\oarg{gender}
\end{definition}
This does the same as \cs{ordinalstring}, but with initial letters in
uppercase.  For example, \verb"\Ordinalstring{section}" will produce:
\Ordinalstring{section}.

\begin{definition}[\DescribeMacro{\ORDINALstring}]
\cs{ORDINALstring}\marg{counter}\oarg{gender}
\end{definition}
This does the same as \cs{ordinalstring}, but with all words in upper
case (see previous note about \cs{MakeUppercase}).

\begin{definition}[\DescribeMacro{\ordinalstringnum}]
\cs{ordinalstringnum}\marg{n}\oarg{gender}
\end{definition}
\begin{definition}[\DescribeMacro{\Ordinalstringnum}]
\cs{Ordinalstringnum}\marg{n}\oarg{gender}
\end{definition}
\begin{definition}[\DescribeMacro{\ORDINALstringnum}]
\cs{ORDINALstringnum}\marg{n}\oarg{gender}
\end{definition}
These macros work like \cs{ordinalstring}, \cs{Ordinalstring} and
\cs{ORDINALstring}, respectively, but take an actual number rather than a
counter as the argument. For example,
\verb"\ordinalstringnum{"\texttt{\arabic{section}}\verb"}" will produce:
\ordinalstring{section}.

\changes{v.1.09}{21 Apr 2007}{store facility added}
As from version 1.09, textual representations can be stored for
later use. This overcomes the problems encountered when you
attempt to use one of the above commands in \cs{edef}.

Each of the following commands takes a label as the first argument,
the other arguments are as the analogous commands above. These
commands do not display anything, but store the textual 
representation. This can later be retrieved using

\begin{definition}[\DescribeMacro{\FMCuse}]
\cs{FMCuse}\marg{label}
\end{definition}

\begin{important}
Note: with \cs{storeordinal} and \cs{storeordinalnum}, the 
only bit that doesn't get expanded is \cs{fmtord}. So, for 
example, \verb"\storeordinalnum{mylabel}{3}" will be stored as
\verb"3\relax \fmtord{rd}".
\end{important}

\begin{definition}[\DescribeMacro{\storeordinal}]
\cs{storeordinal}\marg{label}\marg{counter}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeordinalstring}]
\cs{storeordinalstring}\marg{label}\marg{counter}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeOrdinalstring}]
\cs{storeOrdinalstring}\marg{label}\marg{counter}\oarg{gender}
\end{definition}


\begin{definition}[\DescribeMacro{\storeORDINALstring}]
\cs{storeORDINALstring}\marg{label}\marg{counter}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storenumberstring}]
\cs{storenumberstring}\marg{label}\marg{counter}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeNumberstring}]
\cs{storeNumberstring}\marg{label}\marg{counter}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeNUMBERstring}]
\cs{storeNUMBERstring}\marg{label}\marg{counter}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeordinalnum}]
\cs{storeordinalnum}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeordinalstringnum}]
\cs{storeordinalstring}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeOrdinalstringnum}]
\cs{storeOrdinalstringnum}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeORDINALstringnum}]
\cs{storeORDINALstringnum}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storenumberstringnum}]
\cs{storenumberstring}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeNumberstringnum}]
\cs{storeNumberstring}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\storeNUMBERstringnum}]
\cs{storeNUMBERstring}\marg{label}\marg{number}\oarg{gender}
\end{definition}

\begin{definition}[\DescribeMacro{\binary}]
\cs{binary}\marg{counter}
\end{definition}
This will print the value of \meta{counter} as a binary number.  E.g.\
\verb"\binary{section}" will produce: \binary{section}. The declaration
\begin{definition}[\DescribeMacro{\padzeroes}]
\cs{padzeroes}\oarg{n}
\end{definition}
will ensure numbers are written to \meta{n} digits, padding with zeroes if
necessary. E.g.\ \verb"\padzeroes"\discretionary{}{}{}\verb"[8]\binary{section}"
will produce: \padzeroes[8]\binary{section}. The default value for \meta{n} is
17.

\begin{definition}[\DescribeMacro{\binarynum}]
\cs{binary}\marg{n}
\end{definition}
This is like \cs{binary} but takes an actual number rather than a
counter as the argument. For example: \verb"\binarynum{5}" will
produce: 101.

The octal commands only work for values in the range 0~to~32768.
\begin{definition}[\DescribeMacro{\octal}]
\cs{octal}\marg{counter}
\end{definition}
This will print the value of \meta{counter} as an octal number.  For
example, if you have a counter called, say \texttt{mycounter}, and
you set the value to 125, then \verb"\octal{mycounter}" will produce:
177.  Again, the number will be padded with zeroes if necessary,
depending on whether \cs{padzeroes} has been used.

\begin{definition}[\DescribeMacro{\octalnum}]
\cs{octalnum}\marg{n}
\end{definition}
This is like \cs{octal} but takes an actual number rather than a
counter as the argument. For example: \verb"\octalnum{125}" will
produce: 177.

\begin{definition}[\DescribeMacro{\hexadecimal}]
\cs{hexadecimal}\marg{counter}
\end{definition}
This will print the value of \meta{counter} as a hexadecimal number.
Going back to the counter used in the previous example,
\verb"\hexadecimal{mycounter}" will produce: 7d. Again, the number
will be padded with zeroes if necessary, depending on whether
\cs{padzeroes} has been used.

\begin{definition}[\DescribeMacro{\HEXADecimal}]
\cs{HEXADecimal}\marg{counter}
\end{definition}
This does the same thing, but uses uppercase characters, e.g.\
\verb"\HEXADecimal{mycounter}" will produce: 7D.

\DescribeMacro{\Hexadecimal}The macro \cs{Hexadecimal} is a deprecated alias of
\cs{HEXADecimal}. Its name was confusing so it was
changed. See~\ref{sec:macro-naming}.


\begin{definition}[\DescribeMacro{\hexadecimalnum}]
\cs{hexadecimalnum}\marg{n}
\end{definition}

\begin{definition}[\DescribeMacro{\HEXADecimalnum}]
\cs{HEXADecimalnum}\marg{n}
\end{definition}
These are like \cs{hexadecimal} and \cs{Hexadecimal}
but take an actual number rather than a counter as the
argument. For example: \verb"\hexadecimalnum{125}" will
produce: 7d, and \verb"\HEXADecimalnum{125}" will 
produce: 7D.

\DescribeMacro{\Hexadecimalnum}The macro \cs{Hexadecimalnum} is a deprecated
alias of \cs{HEXADecimalnum}. Its name was confusing so it was changed.
See~\ref{sec:macro-naming}.


\begin{definition}[\DescribeMacro{\decimal}]
\cs{decimal}\marg{counter}
\end{definition}
This is similar to \cs{arabic} but the number can be padded with zeroes
depending on whether \cs{padzeroes} has been used.  For example:
\verb"\padzeroes[8]\decimal{section}" will produce:
\padzeroes[8]\decimal{section} still assuming current section is
section~\arabic{section}.

\begin{definition}[\DescribeMacro{\decimalnum}]
\cs{decimalnum}\marg{n}
\end{definition}
This is like \cs{decimal} but takes an actual number rather than a
counter as the argument. For example:
\verb"\padzeroes[8]\decimalnum{5}" will produce: 00000005.

\begin{definition}[\DescribeMacro{\aaalph}]
\cs{aaalph}\marg{counter}
\end{definition}
This will print the value of \meta{counter} as: a b \ldots\ z aa bb \ldots\ zz
etc.  For example, \verb"\aaalpha"\discretionary{}{}{}\verb"{mycounter}" will
produce: uuuuu if \texttt{mycounter} is set to 125.

\begin{definition}[\DescribeMacro{\AAAlph}]
\cs{AAAlph}\marg{counter}
\end{definition}
This does the same thing, but uses uppercase characters, e.g.\
\verb"\AAAlph{mycounter}" will produce: UUUUU.

\begin{definition}[\DescribeMacro{\aaalphnum}]
\cs{aaalphnum}\marg{n}
\end{definition}

\begin{definition}[\DescribeMacro{\AAAlphnum}]
\cs{AAAlphnum}\marg{n}
\end{definition}
These macros are like \cs{aaalph} and \cs{AAAlph}
but take an actual number rather than a counter as the
argument. For example: \verb"\aaalphnum{125}" will
produce: uuuuu, and \verb"\AAAlphnum{125}" will 
produce: UUUUU.

The abalph commands described below only work for values in the
range 0~to~17576.
\begin{definition}[\DescribeMacro{\abalph}]
\cs{abalph}\marg{counter}
\end{definition}
This will print the value of \meta{counter} as: a b \ldots\ z aa ab
\ldots\ az etc.  For example, \verb"\abalpha{mycounter}" will
produce: du if \texttt{mycounter} is set to 125.

\begin{definition}[\DescribeMacro{\ABAlph}]
\cs{ABAlph}\marg{counter}
\end{definition}
This does the same thing, but uses uppercase characters, e.g.\
\verb"\ABAlph{mycounter}" will produce: DU.

\begin{definition}[\DescribeMacro{\abalphnum}]
\cs{abalphnum}\marg{n}
\end{definition}

\begin{definition}[\DescribeMacro{\ABAlphnum}]
\cs{ABAlphnum}\marg{n}
\end{definition}
These macros are like \cs{abalph} and \cs{ABAlph}
but take an actual number rather than a counter as the
argument. For example: \verb"\abalphnum{125}" will
produce: du, and \verb"\ABAlphnum{125}" will 
produce: DU.

\section{Package Options}
\label{sec:package-options}

The following options can be passed to this package:

\begin{description}
\item[\meta{dialect}] load language \meta{dialect}, supported \meta{dialect} are the same as passed to
  \cs{FCloadlang}, see~\ref{sec:multilingual-support}
\item[\pkgopt{raise}] make ordinal st,nd,rd,th appear as superscript
\item[\pkgopt{level}] make ordinal st,nd,rd,th appear level with rest of text
\end{description}


\noindent Options \pkgopt{raise} and \pkgopt{level} can also be set using the command:

\begin{definition}[\DescribeMacro{\fmtcountsetoptions}]
\cs{fmtcountsetoptions}\verb"{fmtord="\meta{type}\verb'}'
\end{definition}
where \meta{type} is either \texttt{level} or \texttt{raise}. Since version~3.01 of \sty{fmtcount}, it is also
possible to set \meta{type} on a language by language basis, see~\S~\ref{sec:multilingual-support}.

\section{Multilingual Support}
\label{sec:multilingual-support}

Version 1.02 of the \sty{fmtcount} package now has
limited multilingual support.  The following languages are
implemented: English, Spanish, Portuguese, French, French (Swiss)
and French (Belgian). German support was added in version 
1.1.\footnote{Thanks to K. H. Fricke for supplying the information.}
Italian support was added in version 1.31.\footnote{Thanks to
Edoardo Pasca for supplying the information.}

Actually, \sty{fmtcount} has two modes:
\begin{itemize}
\item a multilingual mode, in which the commands \cs{numberstring}, \cs{ordinalstring}, \cs{ordinal}, and
  their variants will be formatted in the currently selected language, as per the \cs{languagename} macro set
  by \sty{babel}, \sty{polyglossia} or suchlikes, and
\item a default mode for backward compatibility in which these commands are formatted in English irrespective
  of \cs{languagename}, and to which \sty{fmtcount} falls back when it cannot detects packages such as
  \sty{babel} or \sty{polyglossia} are loaded.
\end{itemize}

For multilingual mode, \sty{fmtcount} needs to load correctly the language definition for document dialects. To
do this use
\begin{definition}[\DescribeMacro{\FCloadlang}]
\cs{FCloadlang}\marg{dialect}
\end{definition}
in the preamble --- this will both switch on multilingual mode, and load the \meta{dialect} definition. The
\meta{dialect} should match the options passed to \sty{babel} or \sty{polyglossia}. \sty{fmtcount} currently
supports the following \meta{dialect}'s: \LanguagePackageOptionList.

If you don't use \cs{FCloadlang}, \sty{fmtcount} will attempt to detect the required dialects and call
\cs{FCloadlang} for you, but this isn't guaranteed to work.  Notably, when \cs{FCloadlang} is not used and
\sty{fmtcount} has switched on multilingual mode, but without detecting the needed dialects in the preamble,
and \sty{fmtcount} has to format a number for a dialect for which definition has not been loaded (via
\cs{FCloadlang} above), then if \sty{fmtcount} detects a definition file for this dialect it will attempt to
load it, and cause an error otherwise. This loading in body has not been tested extensively, and may may cause
problems such as spurious spaces insertion before the first formatted number, so it's best to use
\cs{FCloadlang} explicitely in the preamble.

If the French language is selected, the \texttt{french} option let you
configure the dialect and other aspects. The \texttt{abbrv} also has
some influence with French. Please refer to \S~\ref
{sec:options-french}.


The male gender for all languages is used by default, however the
feminine or neuter forms can be obtained by passing \texttt{f} or
\texttt{n} as an optional argument to \cs{ordinal},
\cs{ordinalnum} etc.  For example:
\verb"\numberstring{section}[f]". Note that the optional argument
comes \emph{after} the compulsory argument.  If a gender is
not defined in a given language, the masculine version will
be used instead.

Let me know if you find any spelling mistakes (has been known
to happen in English, let alone other languages with which I'm not so
familiar.) If you want to add support for another language,
you will need to let me know how to form the numbers and ordinals 
from~0 to~99999 in that language for each gender.

\subsection{Options for setting ordinal ending position raise/level}
\label{sec:options-fmtord}

\begin{definition}[\DescribeMacro{\fmtcountsetoptions}]
\cs{fmtcountsetoptions}\verb"{"\meta{language}\verb"={fmtord="\meta{type}\verb'}}'
\end{definition}
where \meta{language} is one of the supported language \meta{type} is either \texttt{level} or \texttt{raise}
or \texttt{undefine}. If the value is \texttt{level} or \texttt{raise}, then that will set the \texttt{fmtord}
option accordingly\footnote{see~\S~\ref{sec:package-options}} only for that language \meta{language}. If the
value is \texttt{undefine}, then the non-language specific behaviour is followed.

Some \meta{language} are synonyms, here is a table:

\begin{center}
  \begin{tabular}{|l|l|}\hline
    \textbf{language}& \textbf{alias(es)}\\\hline
    english& british\\\hline
    french&frenchb\\\hline
            &germanb\\
    german&ngerman\\
            &ngermanb\\\hline
    USenglish&american\\\hline
  \end{tabular}
\end{center}

\subsection{Options for French}
\label{sec:options-french}

This section is in French, as it is most useful to French speaking people.

\selectlanguage{french} Il est possible de configurer plusieurs
aspects de la numérotation en français avec les options
\texttt{french} et \texttt{abbrv}. Ces options n'ont d'effet que si le
langage \texttt{french} est chargé.

\begin{definition}[\DescribeMacro{\fmtcountsetoptions}]
\cs{fmtcountsetoptions}\verb"{french="\marg{french options}\verb'}'
\end{definition}
L'argument \meta{french options} est une liste entre accolades et
séparée par des virgules de réglages de la forme
``\meta{clef}\texttt{=}\meta{valeur}'', chacun de ces réglages est
ci-après désigné par ``option française'' pour le distinguer des
``options générales'' telles que \texttt{french}.

Le dialecte peut être sélectionné avec l'option française
\texttt{dialect} dont la valeur \meta{dialect} peut être
\texttt{france}, \texttt{belgian} ou \texttt{swiss}.
\begin{definition}[\DescribeOption{dialect}]
\cs{fmtcountsetoptions}\verb"{french={dialect="\marg{dialect}\verb'}}'
\end{definition}
\begin{definition}[\DescribeOption{french}]
\cs{fmtcountsetoptions}\verb"{french="\meta{dialect}\verb'}'
\end{definition}

Pour alléger la notation et par souci de rétro-compatibilité
\texttt{france}, \texttt{belgian} ou \texttt{swiss} sont également des
\meta{clef}s pour \meta{french options} à utiliser sans \meta{valeur}.

L'effet de l'option \texttt{dialect} est illustré ainsi:\newline
\begin{tabularx}{\linewidth}{@{}lX@{}}
  \pkgopt{france}& soixante-dix pour 70, quatre-vingts pour 80, et
  quatre-vingt-dix pour 90,\\
  \pkgopt{belgian} & septante pour 70, quatre-vingts pour 80, et
  nonante pour 90, \\
  \pkgopt{swiss} &septante pour 70, huitante\footnote{Voir
    \href{http://www.alain.be/Boece/huitante_octante.html}{Octante et
      huitante} sur le site d'Alain Lassine
      (\href{https://web.archive.org/web/20180103050230/http://www.alain.be/Boece/septante.html}{archive ici}).}
  pour 80, et nonante pour 90.
\end{tabularx}
Il est à noter que la variante \texttt{belgian} est parfaitement
correcte pour les francophones français\footnote{Je précise que
  l'auteur de ces lignes est français.}, et qu'elle est également
utilisée en Suisse romande hormis dans les cantons de Vaud, du Valais
et de Fribourg. En ce qui concerne le mot ``octante'', il n'est
actuellement pas pris en charge et n'est guère plus utilisé, ce qui
est sans doute dommage car il est sans doute plus acceptable que le
``huitante'' de certains de nos amis suisses.

\begin{definition}[\DescribeOption{abbrv}]
\cs{fmtcountsetoptions}\verb"{abbrv="\meta{boolean}\verb'}'
\end{definition}
L'option générale \texttt{abbrv} permet de changer l'effet de
\cs{ordinal}. Selon \meta{boolean} on a:\newline
\begin{tabularx}{\linewidth}{@{}lX@{}}
  \pkgopt{true}& pour produire des ordinaux de la forme
  {\def\languagename{french}\csname fmtord@abbrvtrue\endcsname\ordinalnum{2}} (par défaut), ou\\
  \pkgopt{false}& pour produire des ordinaux de la forme
  {\def\languagename{french}\csname fmtord@abbrvfalse\endcsname\ordinalnum{2}} \\
\end{tabularx}

\begin{definition}[\DescribeOption{vingt plural}]
\cs{fmtcountsetoptions}\verb"{french={vingt plural="\meta{french plural control}\verb'}}'
\end{definition}
\begin{definition}[\DescribeOption{cent plural}]
\cs{fmtcountsetoptions}\verb"{french={cent plural="\meta{french plural control}\verb'}}'
\end{definition}
\begin{definition}[\DescribeOption{mil plural}]
\cs{fmtcountsetoptions}\verb"{french={mil plural="\meta{french plural control}\verb'}}'
\end{definition}
\begin{definition}[\DescribeOption{n-illion plural}]
\cs{fmtcountsetoptions}\verb"{french={n-illion plural="\meta{french plural control}\verb'}}'
\end{definition}
\begin{definition}[\DescribeOption{n-illiard plural}]
\cs{fmtcountsetoptions}\verb"{french={n-illiard plural="\meta{french plural control}\verb'}}'
\end{definition}
\begin{definition}[\DescribeOption{all plural}]
\cs{fmtcountsetoptions}\verb"{french={all plural="\meta{french plural control}\verb'}}'
\end{definition}
Les options \texttt{vingt plural}, \texttt{cent plural}, \texttt{mil plural}, \texttt{n-illion plural} et
\texttt{n-illiard plural} permettent de contrôler très finement l'accord en nombre des mots respectivement
vingt, cent, mil, et des mots de la forme \meta{\(n\)}illion et \meta{\(n\)}illiard, où \meta{\(n\)} désigne
`m' pour 1, `b' pour 2, 'tr' pour 3, etc. L'option \texttt{all plural} est un raccourci permettant de
contrôler de concert l'accord en nombre de tous ces mots. Tous ces paramètres valent \texttt{reformed} par
défaut.

Attention, comme on va l'expliquer, seules quelques combinaisons de configurations de ces options donnent une
orthographe correcte vis à vis des règles en vigueur. La raison d'être de ces options est la suivante~:
\begin{itemize}
\item la règle de l'accord en nombre des noms de nombres dans un numéral cardinal demande qu'on sache s'il a
  vraiment une valeur cardinale ou bien une valeur ordinale, ainsi on écrit \og aller à la page deux-cent
  (sans s) d'un livre de deux-cents (avec s) pages\fg, il faut donc pouvoir changer la configuration pour
  sélectionner le cas considéré,
\item un autre cas demandant quelque configurabilité est celui de \og mil\fg\ et \og mille\fg. Pour rappel \og
  mille\fg\ est le pluriel irrégulier de \og mil\fg, mais l'alternance mil/mille est rare, voire pédante, car
  aujourd'hui \og mille\fg\ n'est utilisé que comme un mot invariable, en effet le sort des pluriels étrangers
  est systématiquement de finir par disparaître comme par exemple \og scénarii\fg\ aujourd'hui supplanté par
  \og scénarios\fg. Pour continuer à pouvoir écrire \og mil\fg, il aurait fallu former le pluriel comme \og
  mils\fg, ce qui n'est pas l'usage.  Certaines personnes utilisent toutefois encore \og mil\fg\ dans les
  dates, par exemple \og mil neuf-cent quatre-vingt quatre\fg\ au lieu de \og mille neuf-cent quatre-vingt
  quatre\fg,
\item finalement les règles du français quoique bien définies ne sont pas très cohérentes et il est donc
  inévitable qu'un jour ou l'autre on les simplifie. Le paquetage \styfmt{fmtcount} est déjà prêt à cette
  éventualité.
\end{itemize}

Le paramètre \meta{french plural control} peut prendre les valeurs suivantes:\newline
\settowidth{\tabcolwidth}{\pkgopt{multiple lng-width}}
\begin{supertabular}{@{}p{\tabcolwidth}p{\dimexpr\linewidth-\tabcolwidth-2\tabcolsep}@{}}
  \pkgopt{traditional}& pour sélectionner la règle en usage chez les adultes à la date de parution de ce
  document, et dans le cas des numéraux cardinaux, lorsqu'ils ont une valeur cardinale,\\
  \pkgopt{reformed}& pour suivre toute nouvelle recommandation à la date de parution de ce document et,
  dans le cas des numéraux cardinaux, lorsqu'ils ont une valeur cardinale, l'idée des options
  \texttt{traditional} et \texttt{reformed} est donc de pouvoir contenter à la fois les anciens et les
  modernes, mais à dire vrai à la date où ce document est écrit elles ont exactement
  le même effet,\\
  \pkgopt{traditional o}& pareil que \texttt{traditional} mais dans le cas des numéraux cardinaux,
  lorsqu'ils
  ont une valeur ordinale,\\
  \pkgopt{reformed o}& pareil que \texttt{reformed} mais dans le cas des numéraux cardinaux, lorsqu'ils ont
  une valeur ordinale, de même que précédemment \texttt{reformed o} et \texttt{traditional o} ont
  exactement le même effet,\\
  \pkgopt{always}& pour marquer toujours le pluriel, ceci n'est correct que pour \og mil\fg\ vis à vis des
  règles en vigueur,\\
  \pkgopt{never}& pour ne jamais marquer le pluriel, ceci est incorrect vis à vis des règles d'orthographe
  en vigueur,\\
  \pkgopt{multiple}& pour marquer le pluriel lorsque le nombre considéré est multiplié par au moins 2, ceci
  est la règle en vigueur pour les nombres de la forme \meta{\(n\)}illion et \meta{\(n\)}illiard lorsque le
  nombre a une valeur cardinale,\\
  \pkgopt{multiple g-last}& pour marquer le pluriel lorsque le nombre considéré est multiplié par au moins 2
  est est \emph{\textbf{g}lobalement} en dernière position, où ``globalement'' signifie qu'on considère le
  nombre formaté en entier, ceci est incorrect vis à vis des règles d'orthographe en vigueur,\\
  \pkgopt{multiple l-last}& pour marquer le pluriel lorsque le nombre considéré est multiplié par au moins 2
  et est \emph{\textbf{l}ocalement} en dernière position, où ``localement'' siginifie qu'on considère
  seulement la portion du nombre qui multiplie soit l'unité, soit un \meta{\(n\)}illion ou un
  \meta{\(n\)}illiard~; ceci est la convention en vigueur pour le pluriel de ``vingt'' et de ``cent''
  lorsque le nombre formaté a une valeur cardinale,\\
  \pkgopt{multiple lng-last}& pour marquer le pluriel lorsque le nombre considéré est multiplié par au moins
  2 et est \emph{\textbf{l}ocalement} mais \emph{\textbf{n}on \textbf{g}lobablement} en dernière position,
  où ``localement'' et \emph{globablement} on la même siginification que pour les options \texttt{multiple
    g-last} et \texttt{multiple l-last}~; ceci est la convention en vigueur pour le pluriel de ``vingt'' et
  de ``cent'' lorsque le nombre formaté a une valeur ordinale,\\
  \pkgopt{multiple ng-last}& pour marquer le pluriel lorsque le nombre considéré est multiplié par au moins
  2, et \emph{\textbf{n}}'est pas \emph{\textbf{g}lobalement} en dernière position, où ``globalement'' a la
  même signification que pour l'option \texttt{multiple g-last}~; ceci est la règle que j'infère être en
  vigueur pour les nombres de la forme \meta{\(n\)}illion et \meta{\(n\)}illiard lorsque le nombre a une
  valeur ordinale, mais à dire vrai pour des nombres aussi grands, par exemple \og deux millions\fg, je
  pense qu'il n'est tout simplement pas d'usage de dire \og l'exemplaire deux million(s?)\fg\ pour \og le
  deux millionième exemplaire\fg.\\
\end{supertabular}

L'effet des paramètres \texttt{traditional}, \texttt{traditional o}, \texttt{reformed}, et \texttt{reformed
  o}, est le suivant~:

\setlength{\tabcolwidth}{\linewidth}
\addtolength{\tabcolwidth}{-10\tabcolsep}
\addtolength{\tabcolwidth}{-6\arrayrulewidth}
\setlength{\coliwidth}{0.398\tabcolwidth}
\addtolength{\coliwidth}{\arrayrulewidth}
\addtolength{\coliwidth}{2\tabcolsep}
\noindent\begin{tabular*}{\linewidth}{|%
    >{\centering\arraybackslash\ttfamily}p{\dimexpr0.204\tabcolwidth-\arrayrulewidth-\doublerulesep}||%
    *{4}{>{\centering\arraybackslash\ttfamily}p{0.199\tabcolwidth}|}}\hline
  \textrm{\meta{x} dans ``\meta{x} }plural\textrm{''}&traditional&reformed&traditional o&reformed o\\\hline
  \hline
  vingt&\multicolumn{2}{c|}{\ColIRI{multiple l-last}}&\multicolumn{2}{c|}{\ColIRI{multiple lng-last}}\\\cline{1-1}
  cent&%
  \multicolumn{2}{c|}{\ColIRII{multiple l-last}}&%
  \multicolumn{2}{c|}{\ColIRII{multiple lng-last}}\\\hline
  mil&\multicolumn{4}{c|}{always}\\\hline
  n-illion&\multicolumn{2}{c|}{\ColIRI{multiple}}&%
           \multicolumn{2}{c|}{\ColIRI{multiple ng-last}}\\\cline{1-1}
  n-illiard&%
  \multicolumn{2}{c|}{\ColIRII{multiple}}&%
  \multicolumn{2}{c|}{\ColIRII{multiple ng-last}}\\\hline
\end{tabular*}

Les configurations qui respectent les règles d'orthographe sont les suivantes~:
\begin{itemize}
\item \verb"\fmtcountsetoptions{french={all plural=reformed o}}" pour formater les numéraux cardinaux à
  valeur ordinale,
\item \verb"\fmtcountsetoptions{french={mil plural=multiple}}" pour activer l'alternance mil/mille.
\item \verb"\fmtcountsetoptions{french={all plural=reformed}}" pour revenir dans la configuration par
  défaut.
\end{itemize}

\begin{definition}[\DescribeOption{dash or space}]
\cs{fmtcountsetoptions}\verb"{french={dash or space="\meta{dash or space}\verb'}}'
\end{definition}
Avant la réforme de l'orthographe de 1990, on ne met des traits d'union qu'entre les dizaines et les unités,
et encore sauf quand le nombre \(n\) considéré est tel que \(n\mod10=1\), dans ce cas on écrit ``et un''
sans trait d'union. Après la réforme de 1990, on recommande de mettre des traits d'union partout sauf
autour de ``mille'', ``million'' et ``milliard'', et les mots analogues comme ``billion'',
``billiard''. Cette exception a toutefois été contestée par de nombreux auteurs, et on peut aussi mettre des
traits d'union de partout.  Mettre l'option \meta{dash or space} à:\newline
\begin{tabularx}{\linewidth}{lX}
  \pkgopt{traditional}&  pour sélectionner la règle d'avant la réforme de 1990,\\
  \pkgopt{1990}&  pour suivre  la recommandation de la réforme de 1990, \\
  \pkgopt{reformed}&  pour suivre  la recommandation de la dernière
  réforme pise en charge, actuellement l'effet est le même que \textrm{1990}, ou à\\
  \pkgopt{always}&  pour mettre systématiquement des traits d'union partout.\\
\end{tabularx}
Par défaut, l'option vaut \texttt{reformed}.


\begin{definition}[\DescribeOption{scale}]
\cs{fmtcountsetoptions}\verb"{french={scale="\meta{scale}\verb'}}'
\end{definition}
L'option \texttt{scale} permet de configurer l'écriture des grands
nombres. Mettre \meta{scale} à:\newline
\begin{tabularx}{\linewidth}{lX}
  \pkgopt{recursive}&  dans ce cas \(10^{30}\) donne mille milliards de
  milliards de milliards, pour \(10^n\), on écrit \(10^{n-9\times
    \max\{(n\div 9)-1,0\}}\) suivi de la répétition \(\max\{(n\div
  9)-1,0\}\) fois de ``de milliards''\\
  \pkgopt{long}&  \(10^{6\times n}\) donne un \meta{\(n\)}illion où
  \meta{\(n\)} est remplacé par ``bi'' pour 2, ``tri'' pour 3, etc. et
  \(10^{6\times n+3}\) donne un \meta{\(n\)}illiard avec la même
  convention pour \meta{\(n\)}. L'option \texttt{long} est correcte en
  Europe, par contre j'ignore l'usage au
  Québec.\\
  \pkgopt{short}&  \(10^{6\times n}\) donne un \meta{\(n\)}illion où
  \meta{\(n\)} est remplacé par ``bi'' pour 2, ``tri'' pour 3,
  etc. L'option \texttt{short} est incorrecte en Europe.
\end{tabularx}
Par défaut, l'option vaut \texttt{recursive}.

\begin{definition}[\DescribeOption{n-illiard upto}]
\cs{fmtcountsetoptions}\verb"{french={n-illiard upto="\meta{n-illiard upto}\verb'}}'
\end{definition}
Cette option n'a de sens que si \texttt{scale} vaut
\texttt{long}. Certaines personnes préfèrent dire ``mille
\meta{$n$}illions'' qu'un ``\meta{$n$}illiard''. Mettre l'option
\texttt{n-illiard upto} à:\newline
\begin{tabularx}{\linewidth}{lX}
  \pkgopt{infinity}&  pour que \(10^{6\times n +3}\) donne
  \meta{$n$}illiards pour tout \(n>0\),\\
  \pkgopt{infty}&  même effet que \texttt{infinity}, \\
  \(k\)&  où \(k\) est un entier quelconque strictement positif, dans
  ce cas \(10^{6\times n +3}\) donne ``mille \meta{\(n\)}illions''
  lorsque \(n>k\), et donne ``\meta{\(n\)}illiard'' sinon\\
\end{tabularx}

\begin{definition}[\DescribeOption{mil plural mark}]
\cs{fmtcountsetoptions}\verb"{french={mil plural mark="\meta{any text}\verb'}}'
\end{definition}
La valeur par défaut de cette option est \og\texttt{le}\fg. Il s'agit de la terminaison ajoutée à \og
mil\fg\ pour former le pluriel, c'est à dire \og mille\fg, cette option ne sert pas à grand chose sauf dans
l'éventualité où ce pluriel serait francisé un jour --- à dire vrai si cela se produisait une alternance
mille/milles est plus vraisemblable, car \og mille\fg\ est plus fréquent que \og mil\fg\ et que les
pluriels francisés sont formés en ajoutant \og s\fg\ à la forme la plus fréquente, par exemple \og
blini/blinis\fg, alors que \og blini\fg\ veut déjà dire \og crêpes\fg\ (au pluriel).


\selectlanguage{english}

%\subsection{Prefixes}
%\label{sec:latin-prefixes}
%
%\begin{definition}[\DescribeMacro{\latinnumeralstring}]
%\cs{latinnumeralstring}\marg{counter}\oarg{prefix options}
%\end{definition}
%
%\begin{definition}[\DescribeMacro{\latinnumeralstringnum}]
%\cs{latinnumeralstringnum}\marg{number}\oarg{prefix options}
%\end{definition}


\section{Configuration File \texttt{fmtcount.cfg}}

You can save your preferred default settings to a file called
\texttt{fmtcount.cfg}, and place it on the \TeX\ path.  These
settings will then be loaded by the \sty{fmtcount}
package.

Note that if you are using the \sty{datetime} package,
the \texttt{datetime.cfg} configuration file will override
the \texttt{fmtcount.cfg} configuration file.
For example, if \texttt{datetime.cfg} has the line:
\begin{verbatim}
\renewcommand{\fmtord}[1]{\textsuperscript{\underline{#1}}}
\end{verbatim}
and if \texttt{fmtcount.cfg} has the line:
\begin{verbatim}
\fmtcountsetoptions{fmtord=level}
\end{verbatim}
then the former definition of \cs{fmtord} will take
precedence.

\section{LaTeX2HTML style}

The \LaTeX2HTML\ style file \texttt{fmtcount.perl} is provided.
The following limitations apply:

\begin{itemize}
\item \cs{padzeroes} only has an effect in the preamble.

\item The configuration file 
\texttt{fmtcount.cfg} is currently ignored. (This is because
I can't work out the correct code to do this.  If you
know how to do this, please let me know.)  You can however
do:
\begin{verbatim}
\usepackage{fmtcount}
\html{\input{fmtcount.cfg}}
\end{verbatim}
This, I agree, is an unpleasant cludge.

\end{itemize}

\section{Miscellaneous}
\label{sec:misc}

\subsection{Handling of spaces with tailing optional argument}
\label{sec:tailing-oarg}

Quite some of the commands in \styfmt{fmtcount} have a tailing optional argument, notably a \oarg{gender}
argument, which is due to historical reasons, and is a little unfortunate.

When the tailing optional argument is omitted, then any subsequent space will:
\begin{itemize}
\item \texttt{not} be gobbled if the command make some typset output, like \cs{ordinal} or \cs{numbestring}, and
\item be gobbled if the command stores a number into a label like \cs{storeordinalnum} or
  \cs{storenumberstring}, or make some other border effect like \cs{padzeroes} without any typeset output.
\end{itemize}

So (where we use visible spaces ``\verb*! !'' to demonstrate the point):
\begin{itemize}
\item ``x\cs{odinalnum\{2\}}\verb*! !\texttt{x}'' will be typeset to ``x\ordinalnum{2}\textvisiblespace x'', while
\item ``x\cs{storeodinalnum\{mylabel\}\{2\}}\verb*! !\texttt{x}'' will be typeset to ``xx''.
\end{itemize}

The reason for this design choice is that the commands like like \cs{ordinal} or \cs{numbestring} are usually
inserted in the flow of text, and one usually does not want subsequent spaces gobbled, while the commands like
\cs{storeordinalnum} or \cs{storenumberstring} usually stands on their own line, and one usually does not want
the tailing end-of-line to produce an extra-space.

\subsection{Macro naming conventions}
\label{sec:macro-naming}

Macros that refer to upper-casing have upper case only in the main part of their name. That is to say the
words ``store'', ``string'' or ``num'' are not upper-cased for instance in \cs{storeORDINALstringnum},
\cs{storeOrdinalstringnum} or in \cs{NUMBERstringnum}.

Furthermore, when upper-casing all the number letters is considered, the main part of the name is:
\begin{itemize}
\item all in upper-case when it consist of a single word that is not composed of a prefix+radix, for instance
  ``ORDINAL'' or ``NUMBER'', and
\item with the prefix all in upper-case, and only the first letter of the radix in upper-case for words that
  consist of a prefix+radix, for instance ``HEXADecimal'' or ``AAAlph'' because they can be considered as a
  prefix+radix construct ``hexa+decimal'' or ``aa+alph''.
\end{itemize}

Observance of this rule is the reason why macros \cs{Hexadecimal} and \cs{Hexadecimalnum} were respectively
renamed as \cs{HEXADecimal} and \cs{HEXADecimalnum} from v3.06.


\section{Acknowledgements}

I would like to thank all the people who have provided translations and made bug reports.

\section{Troubleshooting}

There is a FAQ available at: 
\url{http://theoval.cmp.uea.ac.uk/~nlct/latex/packages/faq/}.

Bug reporting should be done via the Github issue manager at: 
\url{https://github.com/nlct/fmtcount/issues/}.

\end{document}
% Local Variables:
% coding: utf-8
% compile-command: "make -C ../dist fmtcount.pdf"
% TeX-engine: xetex
% End:
